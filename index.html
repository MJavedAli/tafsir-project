<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/quran/assets/icons/icon-96.png" sizes="96x96" />
    <link rel="apple-touch-icon" sizes="180x180" href="/quran/assets/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Al-Quran Al-Karim" />
    <link rel="manifest" href="/quran/site.webmanifest.json" />
    <title>Al-Qur'an Al-Karim</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="/quran/assets/css/style.css" />
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/quran//sw.js')
    .then(() => console.log('Service Worker registered'))
    .catch(err => console.error('SW registration failed:', err));
}
</script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="site-nav">
      <button class="sidebar-toggle">
        <span class="menu-icon icon-menu"></span>
      </button>
    </nav>
    <div class="container">
      <!-- Sidebar Chapter List -->
      <aside class="sidebar-chapter-list collapsed" id="chapterSidebar">
        <div class="d-flex justify-content-between align-items-center mb-3">
         <p class="menu-label mb-0">Chapters</p>
         <button type="button" class="btn-close shadow-none" id="closeChapterSidebar" aria-label="Close"></button>
        </div>
        <div class="sidebar-content">
        <form class="d-flex ms-auto mt-3 mb-3 search-form" role="search">
         <span class="icon-search" aria-hidden="true"></span>
         <input type="search" id="chapterSearch" placeholder="Find a Surah..."/>
        </form>
        <ul id="chapterList" class="menu-list list-unstyled"></ul>
       </div>
      </aside>
      <!-- Sidebar -->
      <aside class="sidebar collapsed">
        <!-- Sidebar header -->
        <div class="sidebar-header">
          <div class="header-logo-container"></div>
          <button class="sidebar-toggle">
           <span class="icon-chevron-left" aria-hidden="true"></span>
          </button>
        </div>
        <div class="sidebar-content">
          <!-- Search Form -->
          <form class="d-flex ms-auto mt-3 mb-3 search-form" onsubmit="return handleSearch(event)" role="search">
            <span class="icon-search" aria-hidden="true"></span>
            <input id="searchInput" type="search" placeholder="Search Qur'an" required />
          </form>
          <!-- Sidebar Menu -->
          <ul class="menu-list">
            <li class="menu-item">
              <a href="/quran/" class="menu-link">
                <span class="menu-icon icon-home"></span>
                <span class="menu-label">Home</span>
              </a>
            </li>
            <li class="menu-item">
              <a role="button" id="chapterSidebarToggle" class="menu-link">
                <span class="menu-icon icon-chapter-list"></span>
                <span class="menu-label">Chapters</span>
              </a>
            </li>
            <li class="menu-item">
              <a href="?view=tafsirs" class="menu-link"> 
                <span class="menu-icon icon-tafsir"></span>
                <span class="menu-label">Tafsir</span>
              </a>
            </li>
            <li class="menu-item">
              <a href="?view=juz" class="menu-link">
                <span class="menu-icon icon-fatwa"></span>
                <span class="menu-label">Juz</span>
              </a>
            </li>
            <li class="menu-item">
              <a href="?view=topics" class="menu-link">
                <span class="menu-icon icon-fatwa"></span>
                <span class="menu-label">Topics</span>
              </a>
            </li>
            <li class="menu-item">
              <a href="https://alsalafiyyah.github.io/" class="menu-link" target="_blank">
                <span class="menu-icon icon-fatwa"></span>
                <span class="menu-label">Fatwas</span>
              </a>
            </li>
          </ul>
        </div>
        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
          <button class="theme-toggle">
            <div class="theme-label">
              <span class="theme-icon icon-moon" aria-hidden="true"></span>
              <span class="theme-text">Dark Mode</span>
            </div>
            <div class="theme-toggle-track">
              <div class="theme-toggle-indicator"></div>
            </div>
          </button>
<button class="harakat-toggle mt-3" id="arabicTextToggle">
  <div class="harakat-label">
    <span class="harakat-icon" aria-hidden="true"></span>
    <span class="harakat-text">Hide Harakat</span>
  </div>
  <div class="harakat-track">
    <div class="harakat-indicator"></div>
  </div>
</button>
        </div>
      </aside>
      <!-- Site main content -->
      <div class="main-content py-5">
        <div class="row g-4" id="content"></div>
      </div>
    </div>
<script>
function injectIcon(selector, svg) {
  document.querySelectorAll(selector).forEach(el => {
    el.innerHTML = svg;
  });
}

document.addEventListener("DOMContentLoaded", function () {
  const sidebarToggleBtns = document.querySelectorAll(".sidebar-toggle");
  const sidebar = document.querySelector(".sidebar");
const mainContent = document.querySelector(".main-content");
  const searchForm = sidebar.querySelector(".search-form");
  const themeToggleBtn = document.querySelector(".theme-toggle");
  const themeIcon = themeToggleBtn.querySelector(".theme-icon");
  const chapterSidebar = document.getElementById('chapterSidebar');
  const chapterToggleBtn = document.getElementById('chapterSidebarToggle');
  const closeChapterBtn = document.getElementById('closeChapterSidebar');
  const menuLinks = document.querySelectorAll(".menu-link");

function updateMainContentMargin() {
  const isCollapsed = sidebar.classList.contains("collapsed");
  mainContent.style.marginLeft = isCollapsed ? "90px" : "270px";
}

    if (chapterSidebar && chapterToggleBtn) {
      chapterToggleBtn.addEventListener('click', () => {
        chapterSidebar.classList.toggle('collapsed');
      });
    }
    if (closeChapterBtn) {
      closeChapterBtn.addEventListener('click', () => {
        chapterSidebar.classList.add('collapsed');
      });
    }
    // (Optional) Auto-close chapter sidebar when a chapter is clicked
    document.getElementById('chapterList')?.addEventListener('click', () => {
      chapterSidebar.classList.add('collapsed');
    });

  // SVG icons
const svgSearch = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>`;
const svgChevronRight = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M504-480 348-636q-11-11-11-28t11-28q11-11 28-11t28 11l184 184q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L404-268q-11 11-28 11t-28-11q-11-11-11-28t11-28l156-156Z"/></svg>`;
const svgChevronLeft = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="m432-480 156 156q11 11 11 28t-11 28q-11 11-28 11t-28-11L348-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 28-11t28 11q11 11 11 28t-11 28L432-480Z"/></svg>`;
const svgMoon = `<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><rect fill="none" height="24" width="24"/><path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg>`;
const svgSun = `<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><rect fill="none" height="24" width="24"/><path d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg>`;
  const svgLogo = `<svg class="header-logo" xmlns="http://www.w3.org/2000/svg" width="2.29007in" height="1.04635in" viewBox="0 0 2290.07 1046.35" style="fill: currentColor !important;"><g><path fill="currentColor" d="M2285.97 653.08c8.32,55.84 3.96,109.7 -13.07,162.38l-9.11 0c2.37,-35.65 -1.98,-89.5 -12.67,-162.38l-64.96 -411.89c-4.75,-14.65 -9.9,-36.44 -15.44,-64.95l17.43 -63.76 75.65 139.01 0 28.12 -34.85 -34.85c-2.38,1.58 -3.17,7.52 -2.38,18.61l59.41 389.71zm-325.15 -512.88c-4.75,13.86 -8.71,20.99 -12.67,20.99 -3.96,0 -8.31,-1.58 -12.68,-4.75 -6.33,12.28 -19.8,30.89 -40.79,55.84 -19.41,19.41 -49.11,31.29 -89.11,36.04l-15.05 -1.19c15.44,-6.34 31.29,-14.26 47.52,-23.37 34.06,-19.4 62.58,-43.56 85.55,-73.27 -22.97,-11.48 -34.46,-22.97 -34.46,-34.46 0,-8.71 3.56,-17.82 10.69,-27.33 7.53,-9.9 16.24,-14.65 26.14,-14.65 19.41,0 26.93,19.8 22.18,59.41 0,0 4.35,1.98 12.67,6.74zm59.41 221.78l-38.42 46.34 -54.65 -40.8 39.61 -46.34 53.46 40.8zm-265.74 -350.5c-3.17,8.32 -10.69,24.95 -22.18,49.11 -11.48,24.56 -17.43,38.41 -17.43,41.19l-11.48 1.19c0,-2.38 1.98,-10.69 5.54,-26.14 3.96,-15.05 5.94,-23.36 5.94,-24.95 -33.27,17.82 -66.14,26.93 -98.61,26.93 -22.57,0 -43.96,-3.56 -64.95,-10.69 4.75,15.05 9.5,31.29 15.05,48.71l-6.73 7.13c-5.55,-12.28 -22.18,-36.43 -49.9,-72.08l12.67 -51.88c39.21,32.47 80,48.72 121.59,48.72 19.4,0 38.41,-4.36 56.24,-13.07 18.22,-8.32 36.44,-16.63 54.26,-24.16zm165.94 366.74l-40.79 43.96 -51.09 -38.41 40.79 -46.33 51.09 40.79zm220.21 135.45c6.33,34.06 9.5,65.35 9.5,94.26 0,107.33 -32.48,161.19 -97.43,161.19 -47.53,0 -81.19,-16.63 -102.18,-49.9 -38.82,26.93 -64.56,46.74 -77.63,59.01 -30.5,24.95 -57.82,52.28 -82.38,82.37 -27.33,38.02 -53.47,76.04 -79.21,114.06 -36.83,47.92 -67.72,71.69 -91.49,71.69 -31.68,0 -57.43,-12.28 -77.23,-36.43 -19.8,-24.56 -29.7,-56.24 -29.7,-95.85 0,-43.96 8.71,-88.32 25.74,-133.46l16.24 0c-13.07,48.71 -19.8,86.73 -19.8,113.66 0,58.22 22.97,87.13 68.52,87.13 22.97,0 50.69,-22.18 82.37,-66.14 24.56,-34.06 49.11,-68.52 72.87,-103.37 34.06,-40.79 87.93,-86.33 161.59,-136.63 -8.71,-18.61 -13.07,-45.15 -13.07,-79.21 0,-27.72 9.11,-57.43 27.33,-89.11 18.22,-31.68 39.61,-47.52 64.56,-47.52 38.81,0 57.82,30.49 57.82,91.48 0,45.55 -20.2,92.68 -61.39,140.6 10.69,11.48 28.52,17.43 53.46,17.43 57.03,0 80.8,-30.89 70.89,-93.07l-62.97 -415.45c-5.15,-13.86 -11.09,-34.06 -17.43,-60.2l20.99 -62.58 70.89 141.39 0 25.74 -34.85 -34.85c-2.38,1.58 -2.78,7.13 -1.19,17.42l45.15 286.34zm-396.84 106.93c11.88,69.7 7.13,123.96 -13.87,163.57l-6.73 0c0,-45.55 -5.54,-99.41 -16.24,-161.19l-64.96 -419.01c-4.75,-13.07 -10.69,-33.27 -17.43,-60.2l22.97 -60.2 70.89 139.01 0 24.56 -32.48 -33.67c-3.96,0 -5.15,3.96 -3.56,12.67l61.39 394.46zm297.04 236.84l-3.17 31.29c-0.79,-3.17 -2.37,-4.76 -4.75,-4.76 -2.38,0 -5.15,-2.37 -8.32,-7.13 -2.77,-4.36 -6.73,-6.74 -11.48,-6.74 -7.53,0 -17.82,34.46 -30.1,103.37l-11.48 0c-6.34,-41.19 -15.44,-61.78 -26.93,-61.78 -7.53,3.96 -15.84,3.57 -24.95,-1.58 -8.71,-5.15 -13.07,-14.26 -13.07,-27.33 0,-14.66 5.54,-22.19 17.03,-22.19 12.67,0 22.97,8.72 31.69,25.75 8.32,17.03 16.63,34.46 24.16,52.28 14.65,-66.54 28.12,-99.81 40.79,-99.81 4.35,0 11.48,5.94 20.6,18.61zm-550.9 -255.45c8.31,56.63 3.96,110.1 -13.86,161.19l-8.31 0c0,-53.07 -4.35,-106.93 -12.67,-161.19l-66.14 -414.26c-1.58,-10.69 -4.35,-22.19 -8.71,-34.85 -4.36,-12.28 -6.33,-20.6 -6.33,-25.35l21.78 -62.57 72.08 137.82 0 20.99 -36.04 -31.28c-4.35,2.37 -4.75,7.92 -1.19,17.43l59.41 392.08zm186.54 92.67c0,34.85 -10.3,66.14 -31.28,94.26 -17.03,23.76 -47.53,48.72 -91.49,74.06 -81.98,47.92 -158.82,72.08 -229.71,72.08 -59.81,0 -106.14,-16.24 -139.41,-48.32 -33.27,-32.08 -49.9,-75.65 -49.9,-130.3 0,-75.25 16.24,-137.43 48.71,-186.93l13.07 0c-23.36,60.99 -34.85,103.37 -34.85,126.34 0,46.74 11.48,85.15 34.85,116.04 28.52,38.82 72.87,58.22 133.07,58.22 55.06,0 119.21,-17.03 192.88,-51.09 62.57,-29.31 106.93,-62.57 133.47,-99.8 -21.78,-25.34 -49.51,-68.12 -83.57,-127.52 -7.13,-16.24 -15.84,-34.85 -26.93,-55.84l8.31 -64.95 82.37 82.38 0 16.24 -38.41 -7.92c17.82,24.56 36.83,48.72 57.03,71.69 14.65,20.99 21.78,41.59 21.78,61.39zm-256.24 -24.16l-40.8 45.15 -49.9 -41.59 37.23 -46.34 53.46 42.78zm-219.41 -230.89c-4.36,13.07 -8.72,19.8 -12.68,19.8 -0.79,0 -4.75,-1.98 -11.48,-5.94 -7.13,12.28 -20.99,30.89 -41.98,55.84 -15.45,15.44 -45.15,28.12 -89.11,38.02l-13.86 -3.17c15.44,-7.13 30.89,-14.65 46.34,-22.18 34.06,-20.2 62.97,-43.96 86.73,-72.08 -23.76,-14.65 -35.64,-26.14 -35.64,-34.85 0,-28.52 12.28,-42.78 36.83,-42.78 20.2,0 27.72,19.41 22.18,58.22 0,0 4.36,2.77 12.68,9.11zm-258.62 -64.95c-0.79,1.59 -4.35,2.37 -10.3,2.37 -1.59,0 -3.96,-2.77 -6.73,-7.52 -2.37,-5.15 -5.94,-7.53 -9.5,-7.53 -9.5,0 -19.01,34.46 -29.31,102.97l-11.48 0c-8.31,-40.79 -18.22,-61.39 -28.91,-61.39 -7.13,3.96 -15.05,3.56 -23.76,-1.19 -9.11,-4.75 -13.46,-13.86 -13.46,-27.72 0,-14.65 5.54,-22.18 16.24,-22.18 12.28,0 22.97,8.71 32.08,25.74 8.71,17.03 16.63,34.46 23.76,52.28 3.57,-18.61 7.92,-38.02 12.67,-58.22 6.74,-27.72 16.24,-41.58 27.72,-41.58 3.17,0 6.73,2.37 10.69,7.92 3.56,5.54 7.13,9.11 10.3,10.3l0 25.74zm341 139.01c5.55,31.29 8.31,59.41 8.31,84.76 0,66.54 -15.44,115.65 -46.33,147.33 -23.37,24.16 -51.09,36.04 -83.56,36.04 -58.22,0 -107.33,-13.07 -147.33,-39.21 -30.5,-26.54 -61.78,-52.68 -94.66,-79.21 -32.87,-26.14 -82.77,-64.95 -149.31,-116.04 20.99,38.02 31.29,66.14 31.29,84.76 0,37.22 -18.62,72.48 -56.64,105.74 -10.3,8.31 -43.17,42.37 -98.62,102.18 -28.52,32.47 -57.82,64.56 -87.13,96.24 -36.44,38.02 -66.14,56.63 -89.11,56.63 -33.27,0 -60.59,-12.28 -81.59,-36.83 -20.59,-24.95 -31.29,-56.63 -31.29,-95.45 0,-47.92 14.65,-102.97 44.35,-165.94l17.43 0c-24.16,51.09 -36.04,99.41 -36.04,145.35 0,59.41 23.36,89.11 70.89,89.11 41.58,0 98.22,-45.94 169.11,-137.82 39.61,-50.3 92.28,-97.43 158.02,-141.79 -2.37,-20.2 -24.95,-55.05 -67.33,-105.35 -24.95,-20.99 -61.39,-51.09 -110.5,-90.69 -19.01,-13.07 -28.91,-37.23 -28.91,-72.08 0,-34.46 12.28,-63.37 37.23,-85.55 12.27,-13.46 64.55,-46.74 156.44,-100.99 26.54,-14.65 77.63,-38.02 153.27,-69.7 86.73,-35.65 140.99,-53.47 162.38,-53.47 14.26,0 26.14,5.55 36.04,17.03 10.3,11.09 15.05,23.37 15.05,36.44 0,33.27 -20.99,73.27 -63.76,119.61 -42.37,46.34 -65.74,81.98 -69.7,106.54l-12.68 1.19c-5.54,-21.39 -1.58,-39.61 11.49,-54.26 10.3,-20.2 29.7,-46.74 58.61,-79.61 29.31,-32.87 47.53,-56.64 55.45,-71.29 -2.37,-8.72 -11.49,-13.07 -26.93,-13.07 -32.47,0 -129.51,38.02 -291.09,114.06 -30.89,13.07 -70.49,34.46 -118.41,64.95 -47.93,30.1 -74.46,48.71 -78.82,55.44 82.78,51.89 177.03,113.27 283.17,184.56 86.33,71.29 133.47,108.91 141.39,113.66 47.13,32.48 91.48,48.72 133.47,48.72 81.19,0 116.83,-33.27 106.53,-99.81l-63.76 -415.45c-4.36,-13.86 -9.9,-34.06 -16.24,-60.2l17.43 -62.58 74.45 141.39 0 25.74 -36.04 -34.85c-0.79,1.58 -1.19,7.13 -1.19,17.42l45.15 286.34zm-505.75 -487.14c0,34.85 -17.03,59.81 -51.09,75.25l-613.87 255.45c-15.44,5.54 -28.51,12.28 -39.2,20.99 1.98,-25.74 19.8,-45.15 53.07,-58.22l609.12 -253.87c14.26,-5.54 28.12,-18.61 41.98,-39.61zm244.76 887.54c0.79,17.03 -2.78,32.08 -10.3,44.76 -7.93,12.67 -16.63,19.01 -26.94,19.01 -21.39,0 -32.47,-11.49 -32.47,-34.85 0,-47.93 19.8,-87.13 59.41,-118.02 -24.16,48.71 -36.04,78.82 -36.04,90.3 0,16.24 5.15,24.56 15.05,24.56 19.41,0 26.94,-12.68 23.37,-37.23l7.92 11.48zm-803.97 -766.74c-1.58,2.37 -5.55,3.17 -11.49,3.17 -0.79,0 -2.77,-2.37 -5.94,-7.92 -3.17,-5.55 -5.94,-8.32 -8.31,-8.32 -9.9,0 -20.2,34.85 -31.28,104.56l-10.3 0c-9.5,-41.58 -19.4,-62.57 -30.09,-62.57 -5.55,5.55 -13.07,5.55 -22.18,0 -9.11,-5.54 -13.86,-15.05 -13.86,-28.91 0,-14.66 5.15,-22.18 15.05,-22.18 13.07,0 24.16,8.31 32.48,25.35 8.31,17.03 16.24,34.46 23.37,52.28 3.56,-18.61 7.92,-36.83 12.67,-55.44 6.73,-29.7 16.24,-44.36 27.72,-44.36 3.96,0 7.53,2.77 11.09,8.31 3.57,5.54 7.13,8.72 11.09,10.3l0 25.75zm678.82 748.13l-38.41 47.53 -49.9 -40.4 37.22 -46.34 51.09 39.21zm-98.61 18.61l-37.22 44.36 -52.28 -40.8 36.04 -47.52 53.46 43.96zm-478.02 -446.74c1.58,4.75 1.98,9.5 1.98,13.87 0,20.99 -13.47,38.41 -40.4,52.28 -21.78,13.07 -43.56,19.8 -66.14,19.8l-16.24 0c20.99,-9.11 54.26,-27.72 99.8,-55.84l-66.14 0c-2.38,0 -10.3,3.17 -23.37,9.5 -2.38,-5.54 0.39,-13.47 8.31,-23.76 7.52,-10.69 15.05,-15.84 21.78,-15.84l80.4 0zm260.99 192.88c0,4.35 -4.75,23.76 -13.86,57.82 -34.06,-14.65 -61.78,-22.18 -82.38,-22.18 -73.66,0 -133.07,17.82 -179.01,53.47 -16.24,11.48 -54.66,49.9 -116.05,114.85 -42.37,45.55 -74.06,68.52 -95.05,68.52 -63.36,0 -95.05,-38.02 -95.05,-113.67 0,-26.93 7.92,-58.22 23.76,-92.67 15.85,-34.85 33.27,-60.6 51.49,-76.83l10.69 0c-13.86,13.86 -27.33,37.23 -40,70.1 -12.67,32.87 -19.41,61.39 -19.41,85.54 0,40.8 16.24,61.39 48.71,61.39 23.37,0 55.44,-22.96 96.64,-68.51 54.65,-57.03 102.97,-98.22 144.95,-122.78 33.27,-19.41 76.04,-30.1 128.71,-32.47l0 -5.94 -53.46 -4.75c4.75,-18.62 16.24,-36.83 34.85,-55.45 41.98,-6.33 77.23,-19.8 106.93,-40.79 -10.3,-11.49 -24.16,-32.08 -41.98,-61.39 -9.11,-18.61 -21.78,-44.35 -38.02,-77.62 0,-4.75 -6.73,-19.41 -19.8,-44.36l7.92 -57.82 82.38 77.62 0 17.43 -43.96 -15.05c10.69,12.28 26.14,33.27 45.94,63.37 19.41,29.7 29.31,54.65 29.31,74.85 0,36.04 -13.07,66.93 -39.21,92.67 17.82,6.73 39.21,24.95 64.95,54.66zm-488.72 -79.21c1.59,16.24 -1.58,30.89 -10.3,43.17 -8.32,12.28 -17.82,18.62 -27.72,18.62 -21.78,0 -32.47,-11.88 -32.47,-34.85 0,-46.34 20.59,-86.33 62.57,-119.6 -26.54,46.33 -39.61,77.62 -39.61,93.86 0,15.44 5.55,23.36 16.24,23.36 17.82,0 26.14,-11.88 24.55,-36.04l6.73 11.49zm1838.05 -464.96c0,-9.5 -2.77,-14.26 -7.92,-14.26 -7.92,0 -11.88,3.56 -11.88,10.69 5.54,2.38 11.09,6.34 16.24,12.67 1.59,-2.38 2.78,-5.54 3.56,-9.11zm108.92 458.23c0,-11.48 -5.94,-22.57 -18.22,-32.47 -12.67,-10.3 -24.16,-15.06 -34.85,-15.06 -5.54,1.59 -16.63,9.11 -33.66,22.57 -17.03,13.47 -25.74,24.56 -25.74,32.88 0,20.2 11.49,42.77 33.67,67.32 52.68,-36.43 78.82,-61.38 78.82,-75.25zm-867.74 -159.21c0,-10.69 -3.17,-16.24 -9.11,-16.24 -7.13,0 -10.69,3.56 -10.69,10.69 4.75,2.37 10.3,6.34 16.24,12.67 0.79,-2.37 1.98,-4.75 3.56,-7.13z"/></g></svg>`;
  const svgHome = `<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><g><rect fill="none" height="24" width="24"/><rect fill="none" height="24" width="24"/></g><g><path d="M19,9.3V5c0-0.55-0.45-1-1-1h-1c-0.55,0-1,0.45-1,1v1.6l-3.33-3c-0.38-0.34-0.96-0.34-1.34,0l-8.36,7.53 C2.63,11.43,2.84,12,3.3,12H5v7c0,0.55,0.45,1,1,1h3c0.55,0,1-0.45,1-1v-5h4v5c0,0.55,0.45,1,1,1h3c0.55,0,1-0.45,1-1v-7h1.7 c0.46,0,0.68-0.57,0.33-0.87L19,9.3z M10,10c0-1.1,0.9-2,2-2s2,0.9,2,2H10z"/></g></svg>`;
  const svgTafsir = `<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><g><rect fill="none" height="24" width="24" x="0"/></g><g><path d="M22.47,5.2C22,4.96,21.51,4.76,21,4.59v12.03C19.86,16.21,18.69,16,17.5,16c-1.9,0-3.78,0.54-5.5,1.58V5.48 C10.38,4.55,8.51,4,6.5,4C4.71,4,3.02,4.44,1.53,5.2C1.2,5.36,1,5.71,1,6.08v12.08c0,0.58,0.47,0.99,1,0.99 c0.16,0,0.32-0.04,0.48-0.12C3.69,18.4,5.05,18,6.5,18c2.07,0,3.98,0.82,5.5,2c1.52-1.18,3.43-2,5.5-2c1.45,0,2.81,0.4,4.02,1.04 c0.16,0.08,0.32,0.12,0.48,0.12c0.52,0,1-0.41,1-0.99V6.08C23,5.71,22.8,5.36,22.47,5.2z M10,16.62C8.86,16.21,7.69,16,6.5,16 c-1.19,0-2.36,0.21-3.5,0.62V6.71C4.11,6.24,5.28,6,6.5,6C7.7,6,8.89,6.25,10,6.72V16.62z M19,0.5l-5,5V15l5-4.5V0.5z"/></g></svg>`;
  const svgFatwa = `<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M9,4v1.38c-0.83-0.33-1.72-0.5-2.61-0.5c-1.79,0-3.58,0.68-4.95,2.05l3.33,3.33h1.11v1.11c0.86,0.86,1.98,1.31,3.11,1.36 V15H6v3c0,1.1,0.9,2,2,2h10c1.66,0,3-1.34,3-3V4H9z M7.89,10.41V8.26H5.61L4.57,7.22C5.14,7,5.76,6.88,6.39,6.88 c1.34,0,2.59,0.52,3.54,1.46l1.41,1.41l-0.2,0.2c-0.51,0.51-1.19,0.8-1.92,0.8C8.75,10.75,8.29,10.63,7.89,10.41z M19,17 c0,0.55-0.45,1-1,1s-1-0.45-1-1v-2h-6v-2.59c0.57-0.23,1.1-0.57,1.56-1.03l0.2-0.2L15.59,14H17v-1.41l-6-5.97V6h8V17z"/></g></g></svg>`;
  const svgBook = `<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><g><rect fill="none" height="24" width="24"/></g><g><g/><g><path d="M21,5c-1.11-0.35-2.33-0.5-3.5-0.5c-1.95,0-4.05,0.4-5.5,1.5c-1.45-1.1-3.55-1.5-5.5-1.5S2.45,4.9,1,6v14.65 c0,0.25,0.25,0.5,0.5,0.5c0.1,0,0.15-0.05,0.25-0.05C3.1,20.45,5.05,20,6.5,20c1.95,0,4.05,0.4,5.5,1.5c1.35-0.85,3.8-1.5,5.5-1.5 c1.65,0,3.35,0.3,4.75,1.05c0.1,0.05,0.15,0.05,0.25,0.05c0.25,0,0.5-0.25,0.5-0.5V6C22.4,5.55,21.75,5.25,21,5z M21,18.5 c-1.1-0.35-2.3-0.5-3.5-0.5c-1.7,0-4.15,0.65-5.5,1.5V8c1.35-0.85,3.8-1.5,5.5-1.5c1.2,0,2.4,0.15,3.5,0.5V18.5z"/><g><path d="M17.5,10.5c0.88,0,1.73,0.09,2.5,0.26V9.24C19.21,9.09,18.36,9,17.5,9c-1.7,0-3.24,0.29-4.5,0.83v1.66 C14.13,10.85,15.7,10.5,17.5,10.5z"/><path d="M13,12.49v1.66c1.13-0.64,2.7-0.99,4.5-0.99c0.88,0,1.73,0.09,2.5,0.26V11.9c-0.79-0.15-1.64-0.24-2.5-0.24 C15.8,11.66,14.26,11.96,13,12.49z"/><path d="M17.5,14.33c-1.7,0-3.24,0.29-4.5,0.83v1.66c1.13-0.64,2.7-0.99,4.5-0.99c0.88,0,1.73,0.09,2.5,0.26v-1.52 C19.21,14.41,18.36,14.33,17.5,14.33z"/></g></g></g></svg>`;
  const svgMenu = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#1f1f1f"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M21 11.01L3 11v2h18zM3 16h12v2H3zM21 6H3v2.01L21 8z"/></svg>`;,

  const surah1 = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="69" height="32" viewBox="0 0 69 32"><title>surah1</title><path d="M68.641 5.359q0 0.141-0.063 0.141-0.031 0-0.438-0.453t-0.625-0.453q-0.125 0.031-0.203 0.094 0.156 6.141 1.094 11.188-0.078 0.063-0.078 1.031 0 0.984 0.078 2.828-0.422 1.578-0.875 2.313h-0.578l-2.125-20.234q0-1.922 0.969-1.922 0.922 0 2.844 5.469zM58.5 3.484q0 0.688-1.922 1.625-1.047 0.5-3.141 1.484-3.156 1.547-3.672 1.547-0.813 0-0.813-0.781 0.047-0.109 0.219-0.594l1.781-1.031q0.75-0.594 0.75-1.703 0-1.422-0.359-2.063-0.891-1.563-0.938-1.688 0-0.875 0.734-0.875 2.016 0 2.016 4.922 0.125 0.094 0.5 0.094 0.266 0 1.844-0.648t1.969-0.648q0.328 0 1.031 0.359zM57.375 11.219q0 1.156-1.281 1.156-0.563 0-1.258-0.648t-0.695-1.227q0-1.047 1.063-1.047 0.469 0 1.32 0.648t0.852 1.117zM63.313 5.094q-0.063 0.047-0.125 0.047-0.156 0-0.695-0.422t-0.633-0.422q-0.109 0.203 0.047 0.969 0.172 0.938 0.172 1.031l1.125 11q0 4.953-4.203 4.953-0.422 0-1.531-0.25t-1.547-0.25q-0.719 0-2.516 0.516-1.891 0.578-2.75 0.625-1.484 0.125-2.727-0.773t-1.508-2.352q-0.219-1.109-0.375-3.422-0.047-0.813-0.172-3.016-0.219-3.781-0.219-4.281 0-1.563-0.375-4.797l-0.359-3.156q0-1.203 0.734-1.375 0.391 0.172 0.984 0.859 0.391 1.656 0.641 7.656 0.031 0.625 0.219 3.031l0.375 4.563q0.359 4.453 3.125 4.453 1.797 0 1.969-0.922-0.047-0.484 0.094-1.453 0.547-1.266 1.781-2.578 1.453-1.5 2.531-1.5 2.094 0 2.094 3.672 0 0.938-0.156 1.891 0.109 0.094 0.672 0.094 1.672 0 1.453-1.688l-2.094-16.281q-0.078-0.563 0.141-1.25 0.328-0.859 0.813-0.859 0.516 0 1.703 2.406 1.078 2.25 1.313 3.281zM52.031 14.438q-0.734 0.672-1.031 0.672-0.672 0-1.188-0.742t-0.516-1.445q0-1.063 0.844-2.484h0.563q0.047 0.094 0.047 1.766 0 0.766 1.281 1.656v0.578zM42.797 5.234q0 0.344-0.352 0.742t-0.68 0.398q-0.656 0-2.109-1.453-1.141 1.109-1.563 1.109-0.688 0-1.344-0.891-0.594-0.766-0.594-1.109 0-0.906 1.125-0.906 1.063 0 2.047 1.125 0.078-0.016 0.719-0.594 0.422-0.359 0.656-0.359 0.625 0 1.359 0.672t0.734 1.266zM36.969-0.156q-0.641 0.719-1.031 0.813-6.672 2.047-9.703 3.5-0.609 0.297-0.781 1.063-0.156 0.656-0.625 0.656-0.391 0-0.688-0.445t-0.297-0.852q0-1.609 5.859-3.766 5.125-1.906 6.375-1.906 0.156 0 0.891 0.375v0.563zM31.625 8.953q0 1.125-1.313 1.125-1.438 0-1.438-1.844 0-0.438 0.266-1.172 0.297-0.891 0.656-0.859 0.469 0.281 0.578 1.672 1.25 0.906 1.25 1.078zM43.938 20.375q-0.25 0.641-0.766 0.859-4.453 1.797-5.313 1.797h-1.188q0-0.125-0.086-0.445t-0.086-0.492q5.406-2.453 6.453-2.453 0.609 0 0.984 0.734zM44.75 17.516q-0.75 0.672-1.391 0.672-0.344 0-1.008-0.078t-1.008-0.078q-2.281-0.016-6.766 1.375t-6.516 1.391q-1.828 0-1.969-0.031-2.5-0.313-4.125-2.75-0.516-0.797-1.094-0.797-1.016 0-2.031 1.484-0.906 1.359-1.797 2.703-1.109 1.484-2.359 1.484h-0.891q-0.875-0.219-1.5-1.953-0.438-1.203-0.594-2.5-0.344-3.547-0.391-3.703-0.016-0.266-0.531-1.813-0.375-1.141-0.375-1.359 0-1.703 0.984-4.281 0.906-2.359 2-3.969 0.234-0.344 0.859-0.344 0.359 0.375 0.359 0.641 0 0.094-1.047 1.922-1.531 2.578-1.531 4.625 0 0.563 0.266 1.266 0.406 0.953 0.938 0.953 0.328 0 1.281-0.984 0.266 0 0.586 0.305t0.32 0.586q0 0.781-1.25 2.094-0.375 0.406-1.281 1.328-0.219 1.047-0.219 1.422 0 3.328 2.109 3.328 0.719 0 2.789-2.922t3.445-2.922q0.891 0 1.844 0.969 1.609 1.641 1.797 1.797 1.313 0.984 3 0.984 2.813 0 5.453-1.266 0.016-0.516-2.047-0.813-0.594-0.047-1.734-0.219-1.594-0.313-1.594-1.031 0-1.172 1.656-1.703l1.969-0.359q0.516-0.094 1.625-0.469 0.609-0.344 2.906-1.625 0.063-0.047 1.813-1.547 1.375-1.188 2.016-1.188 1.016 0 1.625 1.359 0.5 1.047 0.5 1.891 0 1.125-0.813 1.125-0.391 0-0.875-0.813t-0.75-0.813q-0.203 0-1.875 1.313-1.922 1.484-2.688 1.891 0 0.281 0.297 0.5 2.891 0.734 4.516 0.953 0.859 0.047 2.531 0.148t2.563 0.883v0.938zM24.656 10.078q0 0.297-0.344 0.719t-0.641 0.422q-0.188 0-0.953-0.406t-0.969-0.406q-0.141 0-0.656 0.242t-0.719 0.242q-0.641 0-1.203-0.391-0.672-0.438-0.672-1.047 0-0.984 1.063-0.984 0.219 0 0.898 0.328t0.867 0.328q0.156 0 0.695-0.328t0.758-0.328q0.578 0 1.227 0.547t0.648 1.063zM19.313 23.531q0 0.781-0.516 1.109-0.688 0.406-3.617 1.43t-3.539 1.023q-0.734 0-0.734-0.641 0-0.625 0.516-0.922 0.953-0.266 3.422-1.047 1.031-0.391 3.734-1.422h0.516q0.219 0.188 0.219 0.469zM57.859 17.094q-0.531-0.516-0.875-0.516-1.484 0-2.203 1.563 0.938 0.906 1.453 0.906 0.891 0 1.625-1.953z"></path></svg>`;

  function updateThemeIcon() {
    const isDark = document.body.classList.contains("dark-theme");
    themeIcon.innerHTML = isDark ? svgSun : svgMoon;
  }

  // Apply theme from storage or system preference
  const savedTheme = localStorage.getItem("theme");
  const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const shouldUseDark = savedTheme === "dark" || (!savedTheme && systemPrefersDark);
  document.body.classList.toggle("dark-theme", shouldUseDark);
  updateThemeIcon();

  // Toggle theme
  themeToggleBtn.addEventListener("click", () => {
    const isDark = document.body.classList.toggle("dark-theme");
    localStorage.setItem("theme", isDark ? "dark" : "light");
    updateThemeIcon();
  });

  // Sidebar toggle
  sidebarToggleBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      sidebar.classList.toggle("collapsed");
    });
  });

  // Expand sidebar on search focus
searchForm.addEventListener("click", () => {
  if (sidebar.classList.contains("collapsed")) {
    sidebar.classList.remove("collapsed");
    searchForm.querySelector("input").focus();
  }
});

// Expand sidebar by default on large screens
if (window.innerWidth > 768) sidebar.classList.remove("collapsed");

// Highlight current menu
const currentURL = new URL(window.location.href);
const currentPath = currentURL.pathname.replace(/\/(index\.html)?$/, "/");
const currentView = currentURL.searchParams.get("view");
const currentVerseParam = currentURL.searchParams.get("verse") || "";

document.querySelectorAll(".menu-list .menu-link").forEach(link => {
  const href = link.getAttribute("href");
  if (!href || href.startsWith("#") || link.hasAttribute("role")) return;

  const linkURL = new URL(href, location.origin);
  const linkPath = linkURL.pathname.replace(/\/(index\.html)?$/, "/");
  const linkView = linkURL.searchParams.get("view");
  const linkVerse = linkURL.searchParams.get("verse");

  let isActive = false;

  if (linkView) {
    isActive = currentView === linkView;
  } else if (linkVerse) {
    // Exact match for chapter links
    isActive = currentVerseParam === linkVerse;
  } else if (!currentView && !currentVerseParam && currentPath === linkPath) {
    // Only match home if no view and no verse param
    isActive = true;
  }

  link.classList.toggle("active", isActive);
});


  // Inject static icons
  injectIcon(".icon-search", svgSearch);
  injectIcon(".icon-chevron-left", svgChevronLeft);
  injectIcon(".icon-chevron-right", svgChevronRight);
  injectIcon(".icon-moon", svgMoon);
  injectIcon(".icon-sun", svgSun);
  injectIcon(".header-logo-container", svgLogo);
  injectIcon(".icon-home", svgHome);
  injectIcon(".icon-tafsir", svgTafsir);
  injectIcon(".icon-fatwa", svgFatwa);
  injectIcon(".icon-menu", svgMenu);
  injectIcon(".icon-chapter-list", svgBook);

  // Fetch and render chapter list
  const chapterListEl = document.getElementById("chapterList");
  const currentChapterId = new URLSearchParams(window.location.search).get("verse");
  fetch("/quran/assets/data/chapter.names.txt")
    .then(res => res.text())
    .then(text => {
      const chapterLines = text.trim().split("\n");
      chapterLines.forEach(line => {
        const [id, transliteration] = line.split("|");
        const li = document.createElement("li");
        li.className = "menu-item";
const verseMatch = currentChapterId?.match(/^(\d+)/);
const currentChapter = verseMatch ? verseMatch[1] : null;
const isActive = id === currentChapter;
        li.innerHTML = `
          <a href="?verse=${id}" class="menu-link ${isActive ? "active" : ""}">
            <span class="menu-icon icon-chapter"></span>
            <span class="menu-label">${id}. ${transliteration}</span>
          </a>`;
        chapterListEl.appendChild(li);
      });
      injectIcon(".icon-chapter", svgBook);
    });

  // Chapter search
  const searchInput = document.getElementById("chapterSearch");
  searchInput.addEventListener("input", () => {
    const query = searchInput.value.toLowerCase();
    const items = chapterListEl.querySelectorAll(".menu-item");
    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(query) ? "" : "none";
    });
  });
});

const svgHarakatOn = `
<svg width="24" height="24" viewBox="0 0 79.976 102.558" <svg width="100" height="80" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
 <g>
  <path d="m23.22,21.13l18.8,-11.6q2.2,-1.4 1.6,0.9l-0.9,2.9q-0.3,1.1 -2,2.1l-17.5,10.1q-1.6,0.9 -1.6,-0.8l0,-1.5q0,-0.8 1.6,-2.1z" id="0"/>
  <path d="m85.72,37.53q1.4,1.6 2.35,3.9q0.95,2.3 1.45,5.2q1,5.7 -0.2,11.2q-1.2,5.4 -4,7q-8,4.6 -18,7.3q-10,2.7 -22,3.3q-24,1.2 -32.2,-9q-5.3,-6.6 -1.6,-15.3q0.8,-1.8 2.15,-3.75q1.35,-1.95 3.25,-4.05q0.6,-0.7 1.3,-0.5q0.5,0.1 0.7,0.8q0.2,0.6 -0.3,1.1q-1.8,2 -2.9,4.3q-1,2.2 -0.5,4.1q3.5,13 29,12.5q12.8,-0.2 23.25,-2.65q10.45,-2.45 18.65,-7.15q-0.3,-3.9 -4.8,-9.6q-0.2,-0.3 0.2,-2.4q0.1,-0.2 0.1,-0.3q0.5,-2.4 2.2,-6q0.6,-1.4 1.9,0zm-36.2,-7.8l3.2,-4.8q0.2,-0.3 0.8,-0.2q1.7,0.7 3.3,1.6q1.6,0.9 3,2.1q0.4,0.4 0.1,0.8l-4.3,6.9q-0.2,0.3 -0.8,-0.2q-0.3,-0.3 -1.55,-1.05q-1.25,-0.75 -3.55,-2.05l-3.4,5.3q-0.3,0.4 -0.9,-0.1q-0.4,-0.3 -1.95,-1.3q-1.55,-1 -4.35,-2.7q-0.4,-0.2 -0.1,-0.5l4.4,-6.6q0.2,-0.3 0.7,-0.2q1.5,0.5 2.85,1.3q1.35,0.8 2.55,1.7z" id="1"/>
 </g>
</svg>
`;
const svgHarakatOff = `
<svg width="24" height="24" viewBox="0 0 79.976 102.558" xmlns:svg="http://www.w3.org/2000/svg">
 <g>
  <path d="m85.72,37.53q1.4,1.6 2.35,3.9q0.95,2.3 1.45,5.2q1,5.7 -0.2,11.2q-1.2,5.4 -4,7q-8,4.6 -18,7.3q-10,2.7 -22,3.3q-24,1.2 -32.2,-9q-5.3,-6.6 -1.6,-15.3q0.8,-1.8 2.15,-3.75q1.35,-1.95 3.25,-4.05q0.6,-0.7 1.3,-0.5q0.5,0.1 0.7,0.8q0.2,0.6 -0.3,1.1q-1.8,2 -2.9,4.3q-1,2.2 -0.5,4.1q3.5,13 29,12.5q12.8,-0.2 23.25,-2.65q10.45,-2.45 18.65,-7.15q-0.3,-3.9 -4.8,-9.6q-0.2,-0.3 0.2,-2.4q0.1,-0.2 0.1,-0.3q0.5,-2.4 2.2,-6q0.6,-1.4 1.9,0zm-36.2,-7.8l3.2,-4.8q0.2,-0.3 0.8,-0.2q1.7,0.7 3.3,1.6q1.6,0.9 3,2.1q0.4,0.4 0.1,0.8l-4.3,6.9q-0.2,0.3 -0.8,-0.2q-0.3,-0.3 -1.55,-1.05q-1.25,-0.75 -3.55,-2.05l-3.4,5.3q-0.3,0.4 -0.9,-0.1q-0.4,-0.3 -1.95,-1.3q-1.55,-1 -4.35,-2.7q-0.4,-0.2 -0.1,-0.5l4.4,-6.6q0.2,-0.3 0.7,-0.2q1.5,0.5 2.85,1.3q1.35,0.8 2.55,1.7z" id="1"/>
 </g>
</svg>
`;

window.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("arabicTextToggle");
  const icon = toggle.querySelector(".harakat-icon");
  const text = toggle.querySelector(".harakat-text");
  const isSimple = localStorage.getItem("arabic_mode") === "simple";

  function updateToggleUI(isSimpleArabic) {
    if (isSimpleArabic) {
      toggle.classList.add("active");
      icon.innerHTML = svgHarakatOff;
      text.textContent = "Show Harakat";
    } else {
      toggle.classList.remove("active");
      icon.innerHTML = svgHarakatOn;
      text.textContent = "Hide Harakat";
    }
  }

  // Initial load
  updateToggleUI(isSimple);

  // On click
  toggle.addEventListener("click", () => {
    const nowSimple = !toggle.classList.contains("active");
    localStorage.setItem("arabic_mode", nowSimple ? "simple" : "full");
    updateToggleUI(nowSimple);
    location.reload(); // optional: only if you need to reload Arabic text
  });
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
  <script src="/quran/assets/js/script.js"></script>
  </body>
</html>
</body>
</html>